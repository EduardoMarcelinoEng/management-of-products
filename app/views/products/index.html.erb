<div id="products">
  <% content_for :for_head do %>
    <%= javascript_include_tag('controllers/product/index.js') %>
  <% end %>
  <h1 class="title">Produtos</h1>
  <div class="new-product">
    <%= link_to(raw("<button class='btn btn-create'>Novo</button>"), new_product_path) %>
  </div>
  <% if @products.size > 0 %>
    <table class="table list-products">
      <thead>
        <tr>
          <th scope="col">Id</th>
          <th scope="col">Nome</th>
          <th scope="col">Ações</th>
        </tr>
      </thead>
      <tbody>
        <% @products.each do |product| %>
          <tr id="product-<%= product.id %>">
            <td>
              <span class="text"><%= product.id %></span>
            </td>
            <td>
              <span class="text"><%= product.name %></span>
            </td>
            <td class="actions">
              <div class="edit-product">
                <%= link_to(raw("<button class='btn btn-edit edit'>Editar</button>"), edit_product_path(product)) %>
              </div>
              <button data-bs-toggle="modal" data-bs-target="#remove-product-<%= product.id %>" class="btn delete">Deletar</button>
              <div class="modal fade" id="remove-product-<%= product.id %>" tabindex="-1" aria-labelledby="remove-product-label" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="remove-product-label">Deletar produto</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      Deseja deletar o produto <%= product.id %>?
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary close" data-bs-dismiss="modal">Fechar</button>
                      <button type="button" class="btn btn-primary delete">Deletar</button>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
  <p class="text">Não há dados para exibir.</p>
  <% end %>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>